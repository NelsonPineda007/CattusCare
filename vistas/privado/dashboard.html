<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard </title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Martian+Mono:wght@100..800&display=swap" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
  <link href="https://unpkg.com/flowbite@1.6.5/dist/flowbite.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="../../css/dashboard.css">
</head>

<body>
  <main class="min-h-screen flex flex-col">
    <div class="flex flex-1 border-4 border-black min-h-0">
      <!-- Navbar lateral -->
      <nav
        class="flex flex-col border-r-4 border-black p-2 justify-between w-[200px] items-center text-left select-none bg-white">
        <div class="flex flex-col items-center space-y-6 w-full">
          <div class="w-32 h-32 flex items-center justify-center text-lg font-bold">
            <a href="dashboard.html" class="block">
              <img alt="Logo black on white background" height="128" src="../../recursos/img/Login.png" width="128" />
            </a>
          </div>
          <div class="space-y-6 w-full flex flex-col items-center">
            <button
              class="nav-button w-full h-20 flex items-center justify-center space-x-3 font-semibold text-sm rounded-md px-6"
              onclick="location.href='dashboard.html'" type="button" aria-label="Ir a Inicio">
              <i class="fas fa-home text-xl" aria-hidden="true"></i>
              <span>Inicio</span>
            </button>
            <button
              class="nav-button w-full h-20 flex items-center justify-center space-x-3 font-semibold text-sm rounded-md px-6"
              onclick="location.href='chat.html'" type="button" aria-label="Ir a Chat">
              <i class="fas fa-comments text-xl" aria-hidden="true"></i>
              <span>Chat</span>
            </button>
            <button
              class="nav-button w-full h-20 flex items-center justify-center space-x-3 font-semibold text-sm rounded-md px-6"
              type="button" aria-label="Ir a Citas">
              <i class="fas fa-calendar-alt text-xl" aria-hidden="true"></i>
              <span>Citas</span>
            </button>
            <button
              class="nav-button w-full h-20 flex items-center justify-center space-x-3 font-semibold text-sm rounded-md px-6"
              type="button" aria-label="Ir a Receta">
              <i class="fas fa-file-medical text-xl" aria-hidden="true"></i>
              <span>Receta</span>
            </button>
          </div>
        </div>
        <div class="navbar-bottom">
          <button id="darkModeToggle"
            class="flex items-center gap-2 px-4 py-2 bg-gray-200 rounded-full hover:bg-gray-300 text-sm text-black"
            aria-pressed="false" aria-label="Alternar modo oscuro">
            <i id="darkModeIcon" class="fas fa-moon text-base" aria-hidden="true"></i>
            <span id="darkModeText" class="select-none">Dark Mode</span>
          </button>
          <a href="perfil.html" class="perfil-button hover:text-red-600" aria-label="Ir a Perfil">
            <i class="fas fa-user" aria-hidden="true"></i>
            <span>Perfil</span>
          </a>
        </div>
      </nav>

      <!-- Contenido principal y sidebar -->
      <div class="flex flex-1 p-6 bg-white overflow-hidden min-h-0">
        <div class="main-content-wrapper">
          <!-- Left content: mensajes y grafica -->
          <div class="left-content">
            <section class="w-full h-auto p-2">
              <h2 id="letra_inicio" class="text-lg font-semibold">INICIO</h2>
              <p>Bienvenido @Doctor</p>
            </section>

            <div class="messages-and-chart">
              <!-- Mensajes Pendientes -->
              <section class="messages-section" aria-label="Mensajes pendientes">
                <p class="mb-2 font-semibold text-sm">Mensajes Pendientes</p>
                <ul class="space-y-2">
                  <li
                    class="flex items-center space-x-3 bg-gray-50 border border-gray-300 rounded-md p-3 shadow-sm hover:shadow-md transition-shadow cursor-pointer">
                    <i class="fas fa-user-circle text-lg text-gray-700" aria-hidden="true"></i>
                    <span class="flex-1 text-sm">Mensaje pendiente de Juan Pérez</span>
                    <i class="fas fa-info-circle text-gray-400" title="Mensaje no leído" aria-label="Mensaje no leído"
                      aria-hidden="true"></i>
                  </li>
                  <li
                    class="flex items-center space-x-3 bg-gray-50 border border-gray-300 rounded-md p-3 shadow-sm hover:shadow-md transition-shadow cursor-pointer">
                    <i class="fas fa-user-circle text-lg text-gray-700" aria-hidden="true"></i>
                    <span class="flex-1 text-sm">Mensaje pendiente de Ana Gómez</span>
                    <i class="fas fa-info-circle text-gray-400" title="Mensaje no leído" aria-label="Mensaje no leído"
                      aria-hidden="true"></i>
                  </li>
                  <li
                    class="flex items-center space-x-3 bg-gray-50 border border-gray-300 rounded-md p-3 shadow-sm hover:shadow-md transition-shadow cursor-pointer">
                    <i class="fas fa-user-circle text-lg text-gray-700" aria-hidden="true"></i>
                    <span class="flex-1 text-sm">Mensaje pendiente de Carlos Ruiz</span>
                    <i class="fas fa-info-circle text-gray-400" title="Mensaje no leído" aria-label="Mensaje no leído"
                      aria-hidden="true"></i>
                  </li>
                </ul>
              </section>

              <!-- Gráfica Pacientes vistos esta semana (pie chart) -->
              <section class="chart-section" aria-label="Gráfica de pacientes vistos esta semana">
                <p class="mb-2">Pacientes vistos esta semana</p>
                <div id="pieChartContainer">
                  <img alt="Pie chart showing patients seen this week with segments labeled 40%, 30%, 10%, 7%, and 13%"
                    class="mx-auto" height="150"
                    src="https://storage.googleapis.com/a1aa/image/0aec909f-81f3-48fc-dab5-e68725b13c07.jpg"
                    width="150" />
                </div>
              </section>
            </div>

            <!-- Citas Pendientes - Sección ampliada -->
            <section class="appointments-section" aria-label="Citas pendientes">
              <p class="mb-1 font-semibold text-sm">Citas Pendientes</p>
              <ul class="space-y-1">
                <li
                  class="flex items-center space-x-3 border border-gray-300 rounded-md p-3 shadow-sm hover:shadow-md transition-shadow bg-gray-50">
                  <i class="fas fa-user-circle text-lg text-gray-700" aria-hidden="true"></i>
                  <span class="flex-1 text-sm">Jaime Nelson Lopez Salinas</span>
                  <span class="text-xs font-mono">08/05/2025 18:00</span>
                  <span
                    class="ml-4 bg-red-600 text-white text-xs font-semibold rounded-full px-3 py-0.5 whitespace-nowrap">CANCELADO</span>
                </li>
                <li
                  class="flex items-center space-x-3 border border-gray-300 rounded-md p-3 shadow-sm hover:shadow-md transition-shadow bg-gray-50">
                  <i class="fas fa-user-circle text-lg text-gray-700" aria-hidden="true"></i>
                  <span class="flex-1 text-sm">Nelson Daniel Pene Pineda</span>
                  <span class="text-xs font-mono">08/05/2025 18:00</span>
                  <span
                    class="ml-4 bg-yellow-400 text-black text-xs font-semibold rounded-full px-3 py-0.5 whitespace-nowrap">PENDIENTE</span>
                </li>
                <li
                  class="flex items-center space-x-3 border border-gray-300 rounded-md p-3 shadow-sm hover:shadow-md transition-shadow bg-gray-50">
                  <i class="fas fa-user-circle text-lg text-gray-700" aria-hidden="true"></i>
                  <span class="flex-1 text-sm">Josue Vladimir Nombre Largo</span>
                  <span class="text-xs font-mono">08/05/2025 18:00</span>
                  <span
                    class="ml-4 bg-green-600 text-white text-xs font-semibold rounded-full px-3 py-0.5 whitespace-nowrap">ACTIVO</span>
                </li>
                <li
                  class="flex items-center space-x-3 border border-gray-300 rounded-md p-3 shadow-sm hover:shadow-md transition-shadow bg-gray-50">
                  <i class="fas fa-user-circle text-lg text-gray-700" aria-hidden="true"></i>
                  <span class="flex-1 text-sm">Ana Patricia Gómez Ruiz</span>
                  <span class="text-xs font-mono">09/05/2025 10:30</span>
                  <span
                    class="ml-4 bg-blue-500 text-white text-xs font-semibold rounded-full px-3 py-0.5 whitespace-nowrap">CONFIRMADA</span>
                </li>
                <li
                  class="flex items-center space-x-3 border border-gray-300 rounded-md p-3 shadow-sm hover:shadow-md transition-shadow bg-gray-50">
                  <i class="fas fa-user-circle text-lg text-gray-700" aria-hidden="true"></i>
                  <span class="flex-1 text-sm">Carlos Andrés Méndez</span>
                  <span class="text-xs font-mono">09/05/2025 12:15</span>
                  <span
                    class="ml-4 bg-purple-500 text-white text-xs font-semibold rounded-full px-3 py-0.5 whitespace-nowrap">URGENTE</span>
                </li>
                <li
                  class="flex items-center space-x-3 border border-gray-300 rounded-md p-3 shadow-sm hover:shadow-md transition-shadow bg-gray-50">
                  <i class="fas fa-user-circle text-lg text-gray-700" aria-hidden="true"></i>
                  <span class="flex-1 text-sm">María Fernanda Castro</span>
                  <span class="text-xs font-mono">09/05/2025 16:45</span>
                  <span
                    class="ml-4 bg-pink-500 text-white text-xs font-semibold rounded-full px-3 py-0.5 whitespace-nowrap">NUEVA</span>
                </li>
              </ul>
              <button class="total-button" type="button" aria-label="Ver más citas pendientes">
                Total +15 <i class="fas fa-chevron-down ml-1" aria-hidden="true"></i>
              </button>
            </section>
          </div>

          <!-- Right sidebar with new chart and alerts -->
          <aside class="right-sidebar" aria-label="Sección derecha con gráfico y alertas urgentes">
            <section aria-label="Rango de edad de personas" class="mb-0">
              <p class="mb-2 font-semibold text-sm text-center">Rango de edad de personas</p>
              <div class="chart-section">
                <canvas id="ageRangeChart" width="280" height="280"
                  aria-label="Gráfico circular del rango de edad de personas" role="img"
                  style="display: block; margin: 0 auto;"></canvas>
              </div>
            </section>
            <!--alertas urgentes-->
            <section class="alerts-container" aria-label="Alertas urgentes">
              <p class="mb-1 font-semibold text-sm border-b border-gray-300 pb-1">Alertas urgentes</p>
              <ul class="space-y-1">
                <li class="alert-item" role="alert">
                  <i class="fas fa-user-circle alert-icon text-gray-700" aria-hidden="true"></i>
                  <div class="alert-text text-gray-800">
                    <p><strong>Maria González:</strong> Alerta - alergia a amoxicilina.</p>
                  </div>
                  <i class="fas fa-exclamation-circle text-red-600 mt-1" title="Alerta crítica"
                    aria-label="Alerta crítica" aria-hidden="true"></i>
                </li>
                <li class="alert-item" role="alert">
                  <i class="fas fa-user-circle alert-icon text-gray-700" aria-hidden="true"></i>
                  <div class="alert-text text-gray-800">
                    <p><strong>Carlos Ruiz:</strong> No tomó medicación ayer.</p>
                  </div>
                  <i class="fas fa-exclamation-circle text-yellow-500 mt-1" title="Alerta importante"
                    aria-label="Alerta importante" aria-hidden="true"></i>
                </li>
                <li class="alert-item" role="alert">
                  <i class="fas fa-user-circle alert-icon text-gray-700" aria-hidden="true"></i>
                  <div class="alert-text text-gray-800">
                    <p><strong>Laura Martínez:</strong> Cita reprogramada para el 10/05/2025.</p>
                  </div>
                  <i class="fas fa-info-circle text-blue-500 mt-1" title="Información" aria-label="Información"
                    aria-hidden="true"></i>
                </li>
                <li class="alert-item" role="alert">
                  <i class="fas fa-user-circle alert-icon text-gray-700" aria-hidden="true"></i>
                  <div class="alert-text text-gray-800">
                    <p><strong>Pedro Sánchez:</strong> Resultado de laboratorio disponible.</p>
                  </div>
                  <i class="fas fa-check-circle text-green-600 mt-1" title="Confirmación" aria-label="Confirmación"
                    aria-hidden="true"></i>
                </li>
                <li class="alert-item" role="alert">
                  <i class="fas fa-user-circle alert-icon text-gray-700" aria-hidden="true"></i>
                  <div class="alert-text text-gray-800">
                    <p><strong>Ana Beltrán:</strong> Requiere autorización para resonancia.</p>
                  </div>
                  <i class="fas fa-file-signature text-purple-500 mt-1" title="Autorización" aria-label="Autorización"
                    aria-hidden="true"></i>
                </li>
                <li class="alert-item" role="alert">
                  <i class="fas fa-user-circle alert-icon text-gray-700" aria-hidden="true"></i>
                  <div class="alert-text text-gray-800">
                    <p><strong>Jorge Mendoza:</strong> No asistió a cita programada.</p>
                  </div>
                  <i class="fas fa-calendar-times text-orange-500 mt-1" title="Cita incumplida"
                    aria-label="Cita incumplida" aria-hidden="true"></i>
                </li>
              </ul>
              <button class="text-xs text-blue-600 hover:text-blue-800 font-semibold self-end mt-2" type="button"
                aria-label="Ver todas las alertas">
                Ver todas las alertas <i class="fas fa-chevron-right ml-1" aria-hidden="true"></i>
              </button>
            </section>
          </aside>
        </div>
      </div>
    </div>
  </main>

  <footer class="bg-gray-100 border-t border-black py-6 font-mono text-gray-700">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- Columna 1: Logo -->
        <div class="flex flex-col items-center md:items-start">
          <a href="dashboard.html" class="mb-4" aria-label="Ir a Dashboard">
            <img alt="Logo black on white background" class="h-16" height="64" src="../../recursos/img/Login.png"
              width="64" />
          </a>
          <p>© 2024 Tu Empresa. Todos los derechos reservados.</p>
        </div>

        <!-- Columna 2: Enlaces rápidos -->
        <div class="flex flex-col items-center md:items-start">
          <h3 class="text-lg font-bold mb-4">Enlaces rápidos</h3>
          <ul class="space-y-2">
            <li><a href="#" class="text-gray-700 transition">Inicio</a></li>
            <li><a href="#" class="text-gray-700 transition">Chat</a></li>
            <li><a href="#" class="text-gray-700 transition">Citas</a></li>
            <li><a href="#" class="text-gray-700 transition">Receta</a></li>
          </ul>
        </div>

        <!-- Columna 3: Redes sociales -->
        <div class="flex flex-col items-center md:items-start">
          <h3 class="text-lg font-bold mb-4">Síguenos</h3>
          <div class="flex space-x-4">
            <a href="#" class="text-gray-700 transition" aria-label="Facebook"><i
                class="fab fa-facebook text-2xl"></i></a>
            <a href="#" class="text-gray-700 transition" aria-label="Instagram"><i
                class="fab fa-instagram text-2xl"></i></a>
            <a href="#" class="text-gray-700 transition" aria-label="Twitter"><i
                class="fab fa-twitter text-2xl"></i></a>
          </div>
        </div>
      </div>

      <!-- Copyright -->
      <div class="border-t border-gray-300 mt-6 pt-4 text-center text-sm text-gray-600">
        <p>© 2024 CattusCare. Todos los derechos reservados.</p>
      </div>
    </div>
  </footer>

  <script src="https://unpkg.com/flowbite@1.6.5/dist/flowbite.min.js"></script>
  <script>
    // Elimina cualquier instancia previa del gráfico
    if (window.ageRangeChart instanceof Chart) {
      window.ageRangeChart.destroy();
    }

    const ctx = document.getElementById('ageRangeChart');
    ctx.style.width = '280px';
    ctx.style.height = '280px';

    window.ageRangeChart = new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: ['0-18', '19-30', '31-45', '46-60', '61+'],
        datasets: [{
          data: [12, 19, 7, 14, 5],
          backgroundColor: [
            '#dc2626',
            '#ef4444',
            '#fecaca',
            '#f87171',
            '#b91c1c'
          ],
          borderWidth: 0
        }]
      },
      options: {
        responsive: false, // IMPORTANTE: Desactiva el responsive
        maintainAspectRatio: false,
        cutout: '60%',
        plugins: {
          legend: {
            position: 'bottom',
            labels: {
              boxWidth: 16,
              padding: 12,
              font: {
                family: "'Martian Mono', monospace",
                size: 12,
                weight: '600'
              }
            }
          },
          tooltip: {
            enabled: false
          }
        },
        // Desactiva todas las interacciones
        interaction: {
          mode: null,
          intersect: false
        },
        // Desactiva animaciones
        animation: {
          duration: 0
        },
        // Desactiva eventos de hover
        onHover: null,
        hover: {
          mode: null,
          animationDuration: 0
        },
        // Configuración específica para evitar redibujados
        devicePixelRatio: 1,
        events: []
      }
    });
  </script>
  <script>
    document
      .getElementById("darkModeToggle")
      ?.addEventListener("click", () => {
        document.documentElement.classList.toggle("dark");
        const icon = document.getElementById("darkModeIcon");
        const text = document.getElementById("darkModeText");
        if (icon && text) {
          icon.classList.toggle("fa-moon");
          icon.classList.toggle("fa-sun");
          text.textContent = document.documentElement.classList.contains(
            "dark"
          )
            ? "Light Mode"
            : "Dark Mode";
        }
      });
  </script>
</body>

</html>